te_react_shadcn_ts@0.0.0 dev
Port 5173 is in use, trying another one...

  VITE v5.4.10  ready in 376 ms

  ➜  Local:   http://localhost:5174/
  ➜  Network: use --host to expose
  ➜  press h + enter to show help
5:36:59 AM [vite] Pre-transform error:   × the name `checkStreakAchievements` is defined multiple times
    ╭─[/home/runner/workspace/src/utils/streakUtils.ts:4:1]
  1 │ import { supabase } from '@/lib/supabase';
  2 │ 
  3 │ // Export checkStreakAchievements for direct use
  4 │ export const checkStreakAchievements = async (userId: string) => {
    ·              ───────────┬───────────
    ·                         ╰── previous definition of `checkStreakAchievements` here
  5 │   try {
  6 │     // Get current streak and XP information
  7 │     const { data: userData, error } = await supabase
  8 │       .from('profiles')
  9 │       .select('streak_count, xp_points')
 10 │       .eq('id', userId)
 11 │       .single();
 12 │       
 13 │     if (error) {
 14 │       console.error('Error fetching user data for achievement check:', error);
 15 │       return;
 16 │     }
 17 │     
 18 │     if (userData) {
 19 │       await checkStreakAchievements(userId, userData.streak_count || 0, userData.xp_points || 0);
 20 │     }
 21 │   } catch (error) {
 22 │     console.error('Error checking achievements directly:', error);
 23 │   }
 24 │ };
 25 │ 
 26 │ export const updateUserActivity = async (userId: string) => {
 27 │   try {
 28 │     // First get current streak info
 29 │     const { data: currentData } = await supabase
 30 │       .from('profiles')
 31 │       .select('streak_count, last_seen')
 32 │       .eq('id', userId)
 33 │       .single();
 34 │ 
 35 │     // Update last_seen to trigger streak calculation
 36 │     const { error } = await supabase
 37 │       .from('profiles')
 38 │       .update({ 
 39 │         last_seen: new Date().toISOString()
 40 │       })
 41 │       .eq('id', userId);
 42 │ 
 43 │     if (error) throw error;
 44 │ 
 45 │     // Fetch updated streak
 46 │     const { data: updatedData } = await supabase
 47 │       .from('profiles')
 48 │       .select('streak_count, xp_points')
 49 │       .eq('id', userId)
 50 │       .single();
 51 │ 
 52 │     if (updatedData) {
 53 │       // Check for achievement updates
 54 │       await checkStreakAchievements(userId, updatedData.streak_count, updatedData.xp_points || 0);
 55 │     }
 56 │ 
 57 │     return updatedData?.streak_count;
 58 │   } catch (error) {
 59 │     console.error('Error updating user activity:', error);
 60 │     return null;
 61 │   }
 62 │ };
 63 │ 
 64 │ // Function to check streak-based achievements
 65 │ const checkStreakAchievements = async (userId: string, streakCount: number, xpPoints: number) => {
    ·       ───────────┬───────────
    ·                  ╰── `checkStreakAchievements` redefined here
 66 │   try {
 67 │     console.log(`Checking achievements for user ${userId} with streak ${streakCount} and XP ${xpPoints}`);
 68 │     
    ╰────

5:37:07 AM [vite] Internal server error:   × the name `checkStreakAchievements` is defined multiple times
    ╭─[/home/runner/workspace/src/utils/streakUtils.ts:4:1]
  1 │ import { supabase } from '@/lib/supabase';
  2 │ 
  3 │ // Export checkStreakAchievements for direct use
  4 │ export const checkStreakAchievements = async (userId: string) => {
    ·              ───────────┬───────────
    ·                         ╰── previous definition of `checkStreakAchievements` here
  5 │   try {
  6 │     // Get current streak and XP information
  7 │     const { data: userData, error } = await supabase
  8 │       .from('profiles')
  9 │       .select('streak_count, xp_points')
 10 │       .eq('id', userId)
 11 │       .single();
 12 │       
 13 │     if (error) {
 14 │       console.error('Error fetching user data for achievement check:', error);
 15 │       return;
 16 │     }
 17 │     
 18 │     if (userData) {
 19 │       await checkStreakAchievements(userId, userData.streak_count || 0, userData.xp_points || 0);
 20 │     }
 21 │   } catch (error) {
 22 │     console.error('Error checking achievements directly:', error);
 23 │   }
 24 │ };
 25 │ 
 26 │ export const updateUserActivity = async (userId: string) => {
 27 │   try {
 28 │     // First get current streak info
 29 │     const { data: currentData } = await supabase
 30 │       .from('profiles')
 31 │       .select('streak_count, last_seen')
 32 │       .eq('id', userId)
 33 │       .single();
 34 │ 
 35 │     // Update last_seen to trigger streak calculation
 36 │     const { error } = await supabase
 37 │       .from('profiles')
 38 │       .update({ 
 39 │         last_seen: new Date().toISOString()
 40 │       })
 41 │       .eq('id', userId);
 42 │ 
 43 │     if (error) throw error;
 44 │ 
 45 │     // Fetch updated streak
 46 │     const { data: updatedData } = await supabase
 47 │       .from('profiles')
 48 │       .select('streak_count, xp_points')
 49 │       .eq('id', userId)
 50 │       .single();
 51 │ 
 52 │     if (updatedData) {
 53 │       // Check for achievement updates
 54 │       await checkStreakAchievements(userId, updatedData.streak_count, updatedData.xp_points || 0);
 55 │     }
 56 │ 
 57 │     return updatedData?.streak_count;
 58 │   } catch (error) {
 59 │     console.error('Error updating user activity:', error);
 60 │     return null;
 61 │   }
 62 │ };
 63 │ 
 64 │ // Function to check streak-based achievements
 65 │ const checkStreakAchievements = async (userId: string, streakCount: number, xpPoints: number) => {
    ·       ───────────┬───────────
    ·                  ╰── `checkStreakAchievements` redefined here
 66 │   try {
 67 │     console.log(`Checking achievements for user ${userId} with streak ${streakCount} and XP ${xpPoints}`);
 68 │     
    ╰────

  Plugin: vite:react-swc
  File: /home/runner/workspace/src/utils/streakUtils.ts:4:1
  29 |      const { data: currentData } = await supabase
  30 |        .from('profiles')
  31 |        .select('streak_count, last_seen')
     |                                  ^
  32 |        .eq('id', userId)
  33 |        .single();
  
5:37:15 AM [vite] Internal server error:   × the name `checkStreakAchievements` is defined multiple times
    ╭─[/home/runner/workspace/src/utils/streakUtils.ts:4:1]
  1 │ import { supabase } from '@/lib/supabase';
  2 │ 
  3 │ // Export checkStreakAchievements for direct use
  4 │ export const checkStreakAchievements = async (userId: string) => {
    ·              ───────────┬───────────
    ·                         ╰── previous definition of `checkStreakAchievements` here
  5 │   try {
  6 │     // Get current streak and XP information
  7 │     const { data: userData, error } = await supabase
  8 │       .from('profiles')
  9 │       .select('streak_count, xp_points')
 10 │       .eq('id', userId)
 11 │       .single();
 12 │       
 13 │     if (error) {
 14 │       console.error('Error fetching user data for achievement check:', error);
 15 │       return;
 16 │     }
 17 │     
 18 │     if (userData) {
 19 │       await checkStreakAchievements(userId, userData.streak_count || 0, userData.xp_points || 0);
 20 │     }
 21 │   } catch (error) {
 22 │     console.error('Error checking achievements directly:', error);
 23 │   }
 24 │ };
 25 │ 
 26 │ export const updateUserActivity = async (userId: string) => {
 27 │   try {
 28 │     // First get current streak info
 29 │     const { data: currentData } = await supabase
 30 │       .from('profiles')
 31 │       .select('streak_count, last_seen')
 32 │       .eq('id', userId)
 33 │       .single();
 34 │ 
 35 │     // Update last_seen to trigger streak calculation
 36 │     const { error } = await supabase
 37 │       .from('profiles')
 38 │       .update({ 
 39 │         last_seen: new Date().toISOString()
 40 │       })
 41 │       .eq('id', userId);
 42 │ 
 43 │     if (error) throw error;
 44 │ 
 45 │     // Fetch updated streak
 46 │     const { data: updatedData } = await supabase
 47 │       .from('profiles')
 48 │       .select('streak_count, xp_points')
 49 │       .eq('id', userId)
 50 │       .single();
 51 │ 
 52 │     if (updatedData) {
 53 │       // Check for achievement updates
 54 │       await checkStreakAchievements(userId, updatedData.streak_count, updatedData.xp_points || 0);
 55 │     }
 56 │ 
 57 │     return updatedData?.streak_count;
 58 │   } catch (error) {
 59 │     console.error('Error updating user activity:', error);
 60 │     return null;
 61 │   }
 62 │ };
 63 │ 
 64 │ // Function to check streak-based achievements
 65 │ const checkStreakAchievements = async (userId: string, streakCount: number, xpPoints: number) => {
    ·       ───────────┬───────────
    ·                  ╰── `checkStreakAchievements` redefined here
 66 │   try {
 67 │     console.log(`Checking achievements for user ${userId} with streak ${streakCount} and XP ${xpPoints}`);
 68 │     
    ╰────

  Plugin: vite:react-swc
  File: /home/runner/workspace/src/utils/streakUtils.ts:4:1
  29 |      const { data: currentData } = await supabase
  30 |        .from('profiles')
  31 |        .select('streak_count, last_seen')
     |                                  ^
  32 |        .eq('id', userId)
  33 |        .single();
   (x2)
